<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Image Combiner - by Max IMBERT, Aug 2018</title>
  <script src="bower_components/dropzone/dist/min/dropzone.min.js"></script>

  <link rel="stylesheet" href="bower_components/dropzone/dist/min/dropzone.min.css" />
  <script type="text/javascript">
    Dropzone.options.uploadForm = {
      autoProcessQueue: false,
      uploadMultiple: true,
      addRemoveLinks: true,
      maxFilesize: 1, // MB
      parallelUploads: 100,
      maxFiles: 100,
      acceptedFiles: "image/*",
      init: function() {
        var dropzone = this;

        this.element.querySelector("button[type=submit]").addEventListener("click", function(e) {
          e.preventDefault();
          e.stopPropagation();

          dropzone.processQueue();
        });
        this.on("successmultiple", function(files, response) {
          var theImage = document.getElementById("output");
          theImage.setAttribute("src", response);
        });
        this.on("error", function(file, response) {
          alert(file.name + ": " + response);
        });
      }
    };
  </script>

  <style>
  form label { display:block; text-align: center; }
  form button[type=submit] { display:block; font-size: 1.33em; margin: 0 auto; }
  </style>
  <body>
    <form id='upload-form' action='http://localhost:3000/upload' method='post'
      class="dropzone"
      enctype="multipart/form-data">

      <label class="dz-message">Drop two or more images here</label>
      <button type='submit' value='Upload!'>Combine images</button>
    </form>
    <img id="output" src="" />
  </body>
</html>
